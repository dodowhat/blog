<!DOCTYPE html>
<html>
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>部署 Gost Https 代理  - 张良计</title>
<meta name="description" content="">

<link rel="alternate" type="application/rss+xml" title="RSS" href="/rss/">

<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="/favicon.png">

<link rel="stylesheet" href="/css/style.css?rnd=1584601200" />

<meta property="og:title" content="部署 Gost Https 代理" />
<meta property="og:description" content="VPS 初始化以及 Docker 安装参考这篇文章 Ubuntu VPS 初始化设置 &#43; Docker安装 解析域名到 VPS 你需要有一个域名，并且将它解析到你的 VPS 上。 部署 Gost Docker 镜像 执行 exit 返回普" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/gost-https-proxy-deployment-on-ubuntu/" />
<meta property="article:published_time" content="2020-03-18T21:38:50+08:00" />
<meta property="article:modified_time" content="2020-03-18T21:38:50+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="部署 Gost Https 代理"/>
<meta name="twitter:description" content="VPS 初始化以及 Docker 安装参考这篇文章 Ubuntu VPS 初始化设置 &#43; Docker安装 解析域名到 VPS 你需要有一个域名，并且将它解析到你的 VPS 上。 部署 Gost Docker 镜像 执行 exit 返回普"/>






    
</head>
<body>
    <div class="container">
        <header> 
            
                <h1 class="site-header">
    <a href="/">张良计</a>
</h1>
<nav>
    
    
</nav>

            
        </header>
        <main>
            

    <article class="post">
        <header>
            <h1>部署 Gost Https 代理</h1>
        </header>
        <div class="content">
            <p>VPS 初始化以及 Docker 安装参考这篇文章 <a href="/posts/ubuntu-vps-initiation">Ubuntu VPS 初始化设置 + Docker安装</a></p>
<h2 id="解析域名到-vps">解析域名到 VPS</h2>
<p>你需要有一个域名，并且将它解析到你的 VPS 上。</p>
<h2 id="部署-gost-docker-镜像">部署 Gost Docker 镜像</h2>
<p>执行 <code>exit</code> 返回普通用户。</p>
<p>创建启动脚本 gost.sh：</p>
<pre><code>#!/bin/bash

## 下面的四个参数需要改成你的
DOMAIN=&quot;example.com&quot;
USER=&quot;username&quot;
PASS=&quot;password&quot;
PORT=443

BIND_IP=0.0.0.0
CERT_DIR=/root/${DOMAIN}
CERT=${CERT_DIR}/${DOMAIN}/cert.pem
KEY=${CERT_DIR}/${DOMAIN}/key.pem
sudo docker run -d --name gost \
    -v ${CERT_DIR}:${CERT_DIR}:ro \
    --net=host ginuerzh/gost \
    -L &quot;http2://${USER}:${PASS}@${BIND_IP}:${PORT}?cert=${CERT}&amp;key=${KEY}&quot;
</code></pre>
<p>启动服务：</p>
<pre><code>$ chmod +x gost.sh
$ ./gost.sh
</code></pre>
<p>重启服务：</p>
<pre><code>$ sudo docker stop gost
$ sudo docker rm gost
$ ./gost.sh
</code></pre>
<p>先不要启动服务，因为证书还没有生成。</p>
<h2 id="安装-acmesh-签发-lets-encrypt-证书">安装 acme.sh 签发 Let&rsquo;s Encrypt 证书</h2>
<p>以 root 身份安装 acme.sh：</p>
<pre><code>$ sudo su -
# apt install -y socat
# curl https://get.acme.sh | sh
# source ~/.bashrc
</code></pre>
<p>签发证书：</p>
<pre><code># acme.sh --issue --standalone -d example.com
# mkdir ~/example.com
# acme.sh --install-cert -d example.com \
  --cert-file ~/example.com/cert.pem \
  --key-file ~/example.com/key.pem
  --reloadcmd &quot;docker restart gost&quot;
</code></pre>
<h2 id="客户端">客户端</h2>
<p>TODO</p>
<h2 id="参考资料">参考资料</h2>
<p><a href="https://github.com/acmesh-official/acme.sh">acme.sh documentation</a></p>
<p><a href="https://haoel.github.io/">科学上网-左耳朵</a></p>
<p><a href="https://docs.ginuerzh.xyz/gost/tls/">Gost 官方文档</a></p>

        </div>
        <div class="article-info">
    
        <div class="article-date">2020-03-18</div>
    
    <div class="article-taxonomies">
        
            
    </div>
</div>
    </article>
    


        </main>
        <footer>
            
                <p>© 2020<br>
Powered by <a target="_blank" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.
</p>

            
        </footer>
    </div>
</body>
</html>
